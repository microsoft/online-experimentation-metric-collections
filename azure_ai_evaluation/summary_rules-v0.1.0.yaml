summaryRules:
  - name: "Online-Experimentation-GenAI-eval"
    binSize: 20
    destinationTable: AppEvents_CL
    description: "Summary rule definition for Azure AI evaluation-based GenAI metrics."
    query: |
      AppTraces
      | where TimeGenerated > ago(30d)
      | where Message == "gen_ai.evaluation.result"
      | project Name = Message,
          TimeGenerated,
          ItemCount,
          Properties= pack("gen_ai.evaluation.score", todouble(Properties["gen_ai.evaluation.score"]),
          "gen_ai.evaluator.name", tostring(Properties["gen_ai.evaluator.name"]),
          "gen_ai.usage.input_tokens", toint(Properties["gen_ai.usage.input_tokens"]),
          "gen_ai.usage.output_tokens", toint(Properties["gen_ai.usage.output_tokens"]))
