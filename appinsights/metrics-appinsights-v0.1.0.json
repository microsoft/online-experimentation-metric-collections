{
  "schemaVersion": "1.0",
  "metrics": [
    {
      "id": "count_dependency_calls",
      "displayName": "Number of dependency calls",
      "description": "The number of dependency calls.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Neutral",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.dependency"
        }
      }
    },
    {
      "id": "avg_dependency_duration",
      "displayName": "Average dependency call duration [ms]",
      "description": "The average duration of dependency calls in milliseconds. This is measured by the DrationMs property.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Average",
        "value": {
          "eventName": "appinsights.dependency",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        }
      }
    },
    {
      "id": "count_request_calls",
      "displayName": "Number of request calls",
      "description": "The number of request calls.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Neutral",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.request"
        }
      }
    },
    {
      "id": "avg_request_duration",
      "displayName": "Average request call duration [ms]",
      "description": "The average duration of request calls in milliseconds. This is measured by the DrationMs property of the call.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Average",
        "value": {
          "eventName": "appinsights.request",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        }
      }
    },
    {
      "id": "p90_request_duration",
      "displayName": "P90 request call duration [ms]",
      "description": "A performance metric where 90% of all requests complete faster than this value (measured in milliseconds). This provides visibility into slower user experiences while filtering out extreme outliers. Set to 'Inactive' by default due to higher processing demands and reduced sensitivity compared to average metrics.",
      "lifecycle": "Inactive",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Percentile",
        "value": {
          "eventName": "appinsights.request",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        },
        "percentile": 90
      }
    },
    {
      "id": "count_users",
      "displayName": "Number of users",
      "description": "The number of users make at least one request.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights",
        "__MetricsCollection_AppInsights__"
      ],
      "desiredDirection": "Increase",
      "definition": {
        "type": "UserCount",
        "event": {
          "eventName": "appinsights.request"
        }
      }
    }
  ]
}