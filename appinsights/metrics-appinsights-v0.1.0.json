{
  "schemaVersion": "1.0",
  "metrics": [
    {
      "id": "count_users",
      "displayName": "Number of users",
      "description": "Counts unique users who made at least one request to your application, based on user allocationid. Essential for understanding application reach, adoption, and usage patterns.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Increase",
      "definition": {
        "type": "UserCount",
        "event": {
          "eventName": "appinsights.request"
        }
      }
    },
    {
      "id": "count_request_calls",
      "displayName": "Number of request calls",
      "description": "Counts the total number of incoming HTTP requests received by your application. This fundamental metric helps establish traffic baseline, understand usage patterns, and monitor system load. Can be used to correlate with performance metrics and verify expected application activity. Sudden changes may indicate client-side issues, networking problems, or changes in user behavior.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Neutral",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.request"
        }
      }
    },
    {
      "id": "count_request_calls",
      "displayName": "Number of request calls",
      "description": "Counts the total number of incoming HTTP requests received by your application. This fundamental metric helps establish traffic baseline, understand usage patterns, and monitor system load. Can be used to correlate with performance metrics and verify expected application activity. Sudden changes may indicate client-side issues, networking problems, or changes in user behavior.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Neutral",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.request"
        }
      }
    },

    {
      "id": "count",
      "displayName": "Number of dependency calls",
      "description": "Counts the total number of outbound calls from your application to external dependencies such as databases, APIs, or other services. Useful for monitoring system load, understanding integration patterns, and identifying potential bottlenecks in distributed systems. An unexpected increase may indicate retry storms or integration issues, while a sudden decrease could suggest connectivity or upstream API problems.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Neutral",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.dependency"
        }
      }
    },
    {
      "id": "count_exceptions",
      "displayName": "Number of exceptions",
      "description": "Counts all exceptions tracked by Application Insights, including handled and unhandled exceptions. Critical for monitoring application stability and error rates. This is ",
      "lifecycle": "Inactive",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "EventCount",
        "event": {
          "eventName": "appinsights.exception"
        }
      }
    },
    {
      "id": "avg_dependency_duration",
      "displayName": "Average dependency call duration [ms]",
      "description": "Measures the average time in milliseconds required to complete calls to external dependencies like databases, external APIs, or other services. A fundamental performance indicator that helps identify slowdowns in external systems. Can be used to verify SLA compliance and track performance trends over time. Increasing values may indicate degraded service performance, network issues, or increased load on downstream services.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Average",
        "value": {
          "eventName": "appinsights.dependency",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        }
      }
    },
    {
      "id": "p90_dependency_duration",
      "displayName": "P90 dependency call duration [ms]",
      "description": "A performance metric where 90% of all dependencies complete faster than this value (measured in milliseconds). This provides visibility into slower user experiences while filtering out extreme outliers. Set to 'Inactive' by default due to higher processing demands and reduced sensitivity compared to average metrics.",
      "lifecycle": "Inactive",
      "categories": [
        "AppInsights_WebAPI"      
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Percentile",
        "value": {
          "eventName": "appinsights.dependency",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        },
        "percentile": 90
      }
    },
    {
      "id": "avg_request_duration",
      "displayName": "Average request call duration [ms]",
      "description": "Measures the average time in milliseconds required to process incoming HTTP requests from receipt to response completion. Request duration is measured by the DurationMS property for all appinsights.request events. This core performance metric directly impacts user experience and perceived application speed. Useful for tracking the overall health of your application and identifying performance regressions.",
      "lifecycle": "Active",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Average",
        "value": {
          "eventName": "appinsights.request",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        }
      }
    },
    {
      "id": "p90_request_duration",
      "displayName": "P90 request call duration [ms]",
      "description": "A performance metric where 90% of all requests complete faster than this value (measured in milliseconds). Request duration is measured by the DurationMS property for all appinsights.request events. This provides visibility into slower user experiences while filtering out extreme outliers. Particularly valuable for user-facing applications where consistent performance is important. Set to 'Inactive' by default due to higher processing demands and reduced sensitivity compared to average metrics.",
      "lifecycle": "Inactive",
      "categories": [
        "AppInsights_WebAPI"
      ],
      "desiredDirection": "Decrease",
      "definition": {
        "type": "Percentile",
        "value": {
          "eventName": "appinsights.request",
          "eventProperty": "DurationMs",
          "filter": "DurationMs > 0"
        },
        "percentile": 90
      }
    }
  ]
}